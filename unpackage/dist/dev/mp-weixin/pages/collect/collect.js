"use strict";const e=require("../../common/vendor.js"),r=require("../../api.js"),d={__name:"collect",setup(f){const s=e.ref(!0),n=e.ref([]),c=JSON.parse(e.index.getStorageSync("userInfo")),l=async()=>{try{const t=await e.index.request({url:r.GET_USER_COLLECT_BOOK,method:"POST",data:{User_Name:c.username}});n.value=t.data}catch{e.index.showToast({title:"加载失败，请稍后再试",icon:"none"})}finally{s.value=!1}},i=t=>{e.index.navigateTo({url:`/pages/detail/detail?id=${t}`})},_=async t=>{try{const a=await e.index.request({url:r.UNCOLLECT_BOOK,method:"POST",data:{User_Name:c.username,Book_ID:t}});e.index.__f__("log","at pages/collect/collect.vue:76",a),a.statusCode==200?(e.index.showToast({title:"取消收藏成功",icon:"success"}),n.value=n.value.filter(o=>o.Book_ID!==t)):e.index.showToast({title:"取消收藏失败，请稍后再试",icon:"none"})}catch{e.index.showToast({title:"网络请求失败，请检查您的网络连接",icon:"none"})}};return e.onMounted(()=>{l()}),(t,a)=>e.e({a:s.value},s.value?{}:n.value.length===0?{}:{c:e.f(n.value,(o,g,h)=>({a:o.Img_Url,b:e.o(u=>i(o.Book_ID),o.Book_ID),c:e.t(o.Book_Name),d:e.t(o.Collect_Time),e:e.o(u=>_(o.Book_ID),o.Book_ID),f:o.Book_ID}))},{b:n.value.length===0})}},v=e._export_sfc(d,[["__scopeId","data-v-b24c290b"]]);wx.createPage(v);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/collect/collect.js.map
