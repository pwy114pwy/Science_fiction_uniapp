"use strict";const e=require("../../common/vendor.js"),v=require("../../api.js"),x={__name:"index",setup(T){let o=e.ref(""),u=e.ref([]),s=e.ref([]),f=e.ref([]),_=e.ref([]),d=e.ref([]);e.ref([{name:"太空探险"},{name:"人工智能"},{name:"异世界"}]);let i=a=>{e.index.setStorageSync("NowBook",a),e.index.navigateTo({url:`/pages/detail/detail?id=${JSON.stringify(a.Book_ID)}`})};async function p(){try{const a=await e.index.request({url:v.Get_Swiper,method:"GET"});u.value=a.data}catch(a){e.index.__f__("error","at pages/index/index.vue:105","Error fetching images:",a)}}async function h(){try{const a=await e.index.request({url:v.Get_All_Books,method:"GET"});s.value=a.data,f.value=s.value.filter(n=>n.Tag.includes("classic")),_.value=s.value.filter(n=>n.Tag.includes("hot")),d.value=[...new Set(s.value.map(n=>n.Topic).join(" ").split(" "))]}catch(a){e.index.__f__("error","at pages/index/index.vue:120","Error fetching books:",a)}}let g=()=>{o.value&&e.index.navigateTo({url:"/pages/search/search?keyword="+encodeURIComponent(o.value)})},m=a=>{e.index.navigateTo({url:"/pages/search/search?tag="+a})};return e.onMounted(()=>{p(),h()}),(a,n)=>({a:e.unref(o),b:e.o(r=>e.isRef(o)?o.value=r.detail.value:o=r.detail.value),c:e.o((...r)=>e.unref(g)&&e.unref(g)(...r)),d:e.f(e.unref(u),(r,t,l)=>({a:r.Img_Url,b:e.o(c=>e.unref(i)(r),t),c:t})),e:e.f(e.unref(d).slice(0,4),(r,t,l)=>({a:e.t(r),b:t,c:e.o(c=>e.unref(m)(r),t)})),f:e.f(e.unref(f),(r,t,l)=>({a:r.Img_Url,b:e.t(r.Book_Name),c:t,d:e.o(c=>e.unref(i)(r),t)})),g:e.f(e.unref(_),(r,t,l)=>({a:r.Img_Url,b:e.t(r.Book_Name),c:t,d:e.o(c=>e.unref(i)(r),t)}))})}},k=e._export_sfc(x,[["__scopeId","data-v-1cf27b2a"]]);wx.createPage(k);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map
