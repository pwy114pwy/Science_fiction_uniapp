{"version":3,"file":"search.js","sources":["pages/search/search.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2VhcmNoL3NlYXJjaC52dWU"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 返回按钮 -->\n    <view class=\"back-button\">\n      <button @click=\"goBack\" class=\"back-btn\">返回</button>\n    </view>\n\n    <!-- 搜索结果标题 -->\n    <view class=\"result-title\">\n      <text class=\"title-text\">搜索结果：</text>\n      <text class=\"keyword-text\">{{ keyword || tag }}</text>\n    </view>\n\n    <!-- 搜索结果列表 -->\n    <view class=\"book-list\">\n      <view class=\"book-item\" v-for=\"(item, index) in searchResults\" :key=\"index\" @click=\"goToDetail(item.Book_ID)\">\n        <image :src=\"item.Img_Url\" mode=\"aspectFill\" class=\"book-image\"></image>\n        <view class=\"book-info\">\n          <p class=\"book-name\">{{ item.Book_Name }}</p>\n          <p class=\"book-author\">{{ item.Author }}</p>\n        </view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport {Search_Book} from \"@/api\"\nlet keyword = ref('');\nlet tag = ref('');\nlet searchResults = ref([]);\n\n// 获取搜索结果\nasync function fetchSearchResults() {\n  try {\n    const response = await uni.request({\n      url: Search_Book,\n      method: 'POST',\n      data: {\n        keyword: keyword.value,\n        tag: tag.value\n      }\n    });\n    searchResults.value = response.data;\n  } catch (error) {\n    console.error('Error fetching search results:', error);\n  }\n}\n\n// 返回上一页\nlet goBack = () => {\n  uni.navigateBack();\n};\n\n// 跳转到详情页\nlet goToDetail = (id) => {\n  uni.setStorageSync('currentItemId', id);\n  uni.navigateTo({\n    url: `/pages/detail/detail?id=${JSON.stringify(id)}`\n  });\n};\n\n// 页面加载时获取参数并调用搜索函数\nonLoad((options) => {\n  if (options.keyword) {\n    keyword.value = decodeURIComponent(options.keyword);\n  }\n  if (options.tag) {\n    tag.value = options.tag;\n  }\n  fetchSearchResults();\n});\n</script>\n\n<style scoped>\n/* 添加一些样式 */\n.container {\n  background-color: #f5f5f5;\n  padding: 20px;\n}\n\n.back-button {\n  margin-bottom: 10px;\n}\n\n.back-btn {\n  background-color: #007bff;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  font-size: 16px;\n}\n\n.result-title {\n  font-size: 24px;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 20px;\n}\n\n.title-text {\n  color: #333;\n}\n\n.keyword-text {\n  color: #007bff;\n}\n\n.book-list {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n}\n\n.book-item {\n  width: 30%;\n  margin: 10px;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  overflow: hidden;\n  transition: transform 0.2s;\n}\n\n.book-item:hover {\n  transform: scale(1.05);\n}\n\n.book-image {\n  width: 100%;\n  height: 150px;\n  object-fit: cover;\n}\n\n.book-info {\n  padding: 10px;\n}\n\n.book-name {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n  margin: 0;\n}\n\n.book-author {\n  font-size: 14px;\n  color: #666;\n  margin: 5px 0 0;\n}\n</style>","import MiniProgramPage from 'E:/uniapp工作空间/Science _fiction/pages/search/search.vue'\nwx.createPage(MiniProgramPage)"],"names":["keyword","ref","tag","searchResults","fetchSearchResults","response","uni","Search_Book","error","goBack","goToDetail","id","onLoad","options","MiniProgramPage"],"mappings":"6GA8BA,IAAIA,EAAUC,EAAAA,IAAI,EAAE,EAChBC,EAAMD,EAAAA,IAAI,EAAE,EACZE,EAAgBF,EAAAA,IAAI,CAAA,CAAE,EAG1B,eAAeG,GAAqB,CAClC,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAG,MAAC,QAAQ,CACjC,IAAKC,EAAW,YAChB,OAAQ,OACR,KAAM,CACJ,QAASP,EAAQ,MACjB,IAAKE,EAAI,KACV,CACP,CAAK,EACDC,EAAc,MAAQE,EAAS,IAChC,OAAQG,EAAO,CACdF,EAAA,MAAA,MAAA,QAAA,gCAAc,iCAAkCE,CAAK,CACtD,CACH,CAGA,IAAIC,EAAS,IAAM,CACjBH,EAAG,MAAC,aAAY,CAClB,EAGII,EAAcC,GAAO,CACvBL,EAAAA,MAAI,eAAe,gBAAiBK,CAAE,EACtCL,EAAAA,MAAI,WAAW,CACb,IAAK,2BAA2B,KAAK,UAAUK,CAAE,CAAC,EACtD,CAAG,CACH,EAGAC,OAAAA,EAAM,OAAEC,GAAY,CACdA,EAAQ,UACVb,EAAQ,MAAQ,mBAAmBa,EAAQ,OAAO,GAEhDA,EAAQ,MACVX,EAAI,MAAQW,EAAQ,KAEtBT,GACF,CAAC,kQCxED,GAAG,WAAWU,CAAe"}