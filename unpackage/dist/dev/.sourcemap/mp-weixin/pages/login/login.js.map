{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\r\n\t<view class=\"login-page\">\r\n\t\t<h1>登录</h1>\r\n\t\t<form @submit=\"handleLogin\">\r\n\r\n\t\t\t<label for=\"username\">用户名：</label>\r\n\t\t\t<input type=\"text\" v-model=\"username\" required />\r\n\r\n\t\t\t<label for=\"password\">密码：</label>\r\n\t\t\t<input type=\"password\" v-model=\"password\" required />\r\n\r\n\t\t\t<button form-type=\"submit\">登录</button>\r\n\t\t</form>\r\n\t\t<p><button @click=\"navigateToRegister\">没有账号？去注册</button></p>\r\n\t</view>\r\n</template>\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref\r\n\t} from 'vue';\r\n\timport { User_Login } from '@/api'; // 假设这是你的用户API模块\r\n\t// import { showToast } from '@/utils/utils'; // 假设这是一个通用的提示函数\r\n\r\n\tlet username = ref('');\r\n\tlet password = ref('');\r\n\r\n\tconst handleLogin = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: User_Login,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tusername: username.value,\r\n\t\t\t\t\tpassword: password.value,\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tconsole.log(response);\r\n\t\t\tif (response.statusCode==200) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:'登录成功'\r\n\t\t\t\t});\r\n\t\t\t\t// 登录成功，保存用户信息并跳转到首页\r\n\t\t\t\tuni.setStorageSync('token', response.data.token);\r\n\t\t\t\tuni.setStorageSync('userInfo', JSON.stringify(response.data.user));\r\n\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\t// showToast(response.message || '登录失败');\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:'登录失败,'+response.data.error,\r\n\t\t\t\t\ticon:\"error\",\r\n\t\t\t\t\tduration:2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\t// showToast('网络请求失败');\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle:'网络请求失败',\r\n\t\t\t\ticon:\"error\",\r\n\t\t\t\tduration:2000\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n\tconst navigateToRegister = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '/pages/register/register'\r\n\t\t});\r\n\t};\r\n</script>\r\n\r\n<style scoped>\r\n\t.login-page {\r\n\t\tpadding: 20px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\tform {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\twidth: 100%;\r\n\t\tmax-width: 300px;\r\n\t}\r\n\r\n\tlabel {\r\n\t\tmargin-top: 10px;\r\n\t}\r\n\r\n\tinput {\r\n\t\tpadding: 10px;\r\n\t\tmargin-top: 5px;\r\n\t\tborder: 1px solid #ccc;\r\n\t\tborder-radius: 5px;\r\n\t}\r\n\r\n\tbutton {\r\n\t\tmargin-top: 20px;\r\n\t\tpadding: 10px;\r\n\t\tbackground-color: #007bff;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tborder-radius: 5px;\r\n\t\tcursor: pointer;\r\n\t}\r\n\r\n\tbutton:hover {\r\n\t\tbackground-color: #0056b3;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/uniapp工作空间/Science _fiction/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["username","ref","password","handleLogin","response","uni","User_Login","navigateToRegister","MiniProgramPage"],"mappings":"4GAwBC,IAAIA,EAAWC,MAAI,EAAE,EACjBC,EAAWD,MAAI,EAAE,EAErB,MAAME,EAAc,SAAY,CAC/B,GAAI,CACH,MAAMC,EAAW,MAAMC,EAAG,MAAC,QAAQ,CAClC,IAAKC,EAAU,WACf,OAAQ,OACR,KAAM,CACL,SAAUN,EAAS,MACnB,SAAUE,EAAS,KACnB,CACL,CAAI,EACDG,EAAAA,MAAY,MAAA,MAAA,8BAAAD,CAAQ,EAChBA,EAAS,YAAY,KACxBC,EAAAA,MAAI,UAAU,CACb,MAAM,MACX,CAAK,EAEDA,EAAG,MAAC,eAAe,QAASD,EAAS,KAAK,KAAK,EAC/CC,QAAI,eAAe,WAAY,KAAK,UAAUD,EAAS,KAAK,IAAI,CAAC,EACjEC,EAAAA,MAAI,SAAS,CACZ,IAAK,oBACV,CAAK,GAIDA,EAAAA,MAAI,UAAU,CACb,MAAM,QAAQD,EAAS,KAAK,MAC5B,KAAK,QACL,SAAS,GACd,CAAK,CAEF,MAAe,CAEfC,EAAAA,MAAI,UAAU,CACb,MAAM,SACN,KAAK,QACL,SAAS,GACb,CAAI,CACD,CACH,EAEOE,EAAqB,IAAM,CAChCF,EAAAA,MAAI,WAAW,CACd,IAAK,0BACR,CAAG,CACH,gPCtEA,GAAG,WAAWG,CAAe"}