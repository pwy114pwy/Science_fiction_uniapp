{"version":3,"file":"index.js","sources":["pages/index/index.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 搜索框 -->\n    <view class=\"search-bar\">\n      <input type=\"text\" placeholder=\"搜索小说\" v-model=\"searchText\" class=\"search-input\" />\n      <button @click=\"searchNovel\" class=\"search-btn\">搜索</button>\n    </view>\n    \n    <!-- 轮播图 -->\n    <swiper class=\"swiper-box\" :indicator-dots=\"true\" :autoplay=\"true\" interval=\"3000\" duration=\"1000\" circular=\"true\">\n      <swiper-item v-for=\"(item, index) in swiperList\" :key=\"index\">\n        <image :src=\"item.Img_Url\" class=\"swiper-img\" @click=\"goToDetail(item)\" />\n      </swiper-item>\n    </swiper>\n    \n    <!-- 小说主题分类 -->\n    <view class=\"genre-list\">\n      <view class=\"section-title\">小说主题分类</view>\n      <view class=\"tag-list\">\n        <view class=\"tag-item\" v-for=\"(item, index) in Booktopic.slice(0, 4)\" :key=\"index\" @click=\"filterByTag(item)\">\n          <text>{{ item }}</text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 经典作品推荐 -->\n    <view class=\"recommend-section\">\n      <view class=\"section-title\">经典作品推荐</view>\n      <scroll-view scroll-x class=\"book-list\">\n        <view class=\"book-item\" v-for=\"(item, index) in classicBooks\" :key=\"index\" @click=\"goToDetail(item)\">\n          <image :src=\"item.Img_Url\" mode=\"aspectFill\" class=\"book-image\" />\n          <p class=\"book-name\">{{ item.Book_Name }}</p>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 热门作品推荐 -->\n    <view class=\"recommend-section\">\n      <view class=\"section-title\">热门作品推荐</view>\n      <scroll-view scroll-x class=\"book-list\">\n        <view class=\"book-item\" v-for=\"(item, index) in hotBooks\" :key=\"index\" @click=\"goToDetail(item)\">\n          <image :src=\"item.Img_Url\" mode=\"aspectFill\" class=\"book-image\" />\n          <p class=\"book-name\">{{ item.Book_Name }}</p>\n        </view>\n      </scroll-view>\n    </view>\n\n    <!-- 底部TabBar -->\n<!--    <view class=\"tabbar\">\n      <navigator url=\"/pages/index/index\" hover-class=\"navigator-hover\" @click=\"switchTab('/pages/index/index')\">\n        <text>首页</text>\n      </navigator>\n      <navigator url=\"/pages/Illustrated/Illustrated\" hover-class=\"navigator-hover\" @click=\"switchTab('/pages/Illustrated/Illustrated')\">\n        <text>分类</text>\n      </navigator>\n      <navigator url=\"/pages/user/user\" hover-class=\"navigator-hover\" @click=\"switchTab('/pages/user/user')\">\n        <text>我的</text>\n      </navigator>\n    </view> -->\n  </view>\n</template>\n\n<script setup>\nimport { onMounted, ref } from 'vue';\r\nimport { Get_Swiper,Get_All_Books } from '@/api';\n// import { uni } from '@dcloudio/uni-app';\n\nlet searchText = ref('');\n\n// 假设这是从服务器获取的数据\nlet swiperList = ref([]);\nlet AllBooks = ref([]);\nlet classicBooks = ref([]);\nlet hotBooks = ref([]);\nlet Booktopic = ref([]);\n\nlet tags = ref([\n  { name: '太空探险' },\n  { name: '人工智能' },\n  { name: '异世界' },\n  // 更多标签...\n]);\n\nfunction switchTab(url) {\n  uni.switchTab({\n    url: url\n  });\n}\n\nlet goToDetail = (item) => {\n  uni.setStorageSync('NowBook', item);\n  uni.navigateTo({\n    url: `/pages/detail/detail?id=${JSON.stringify(item.Book_ID)}`\n  });\n};\n\nasync function get_swpier_img() {\n  try {\n    const response = await uni.request({\n      url: Get_Swiper,\n      method: 'GET'\n    });\n    swiperList.value = response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n}\n\nasync function get_books_img() {\n  try {\n    const response = await uni.request({\n      url: Get_All_Books,\n      method: 'GET'\n    });\n    AllBooks.value = response.data;\n    classicBooks.value = AllBooks.value.filter(item => item.Tag.includes(\"classic\"));\n    hotBooks.value = AllBooks.value.filter(item => item.Tag.includes(\"hot\"));\n    Booktopic.value = [...new Set(AllBooks.value.map(item => item.Topic).join(' ').split(' '))];\n  } catch (error) {\n    console.error('Error fetching books:', error);\n  }\n}\n\nlet searchNovel = () => {\n  if (searchText.value) {\n    uni.navigateTo({\n      url: '/pages/search/search?keyword=' + encodeURIComponent(searchText.value)\n    });\n  }\n};\n\nlet filterByTag = (tagName) => {\n  uni.navigateTo({\n    url: '/pages/search/search?tag=' + tagName\n  });\n};\n\nonMounted(() => {\n  get_swpier_img();\n  get_books_img();\n});\n</script>\n\n<style scoped>\n.container {\n  padding-top: 20upx;\n  background-color: #f5f5f5;\n}\n\n.search-bar {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 20upx;\n  padding: 10upx 20upx;\n  background-color: #fff;\n  border-radius: 20upx;\n  box-shadow: 0 2upx 10upx rgba(0, 0, 0, 0.1);\n}\n\n.search-input {\n  flex: 1;\n  height: 60upx;\n  padding-left: 20upx;\n  font-size: 28upx;\n  color: #333;\n  background-color: #f0f0f0;\n  border: none;\n  border-radius: 20upx;\n}\n\n.search-btn {\n  padding: 0 30upx;\n  font-size: 28upx;\n  color: #fff;\n  background-color: #007AFF;\n  border-radius: 20upx;\n  margin-left: 20upx;\n}\n\n.swiper-box {\n  height: 300upx;\n  overflow: hidden;\n  margin: 20upx;\n  border-radius: 10upx;\n  box-shadow: 0 2upx 10upx rgba(0, 0, 0, 0.1);\n}\n\n.swiper-img {\n  width: 100%;\n  height: 100%;\n  border-radius: 10upx;\n}\n\n.genre-list {\n  margin: 20upx;\n  padding: 20upx;\n  background-color: #fff;\n  border-radius: 10upx;\n  box-shadow: 0 2upx 10upx rgba(0, 0, 0, 0.1);\n}\n\n.section-title {\n  font-size: 36upx;\n  color: #333;\n  margin-bottom: 20upx;\n}\n\n.tag-list {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n  margin-top: 20upx;\n}\n\n.tag-item {\n  width: 100upx;\n  height: 100upx;\n  line-height: 100upx;\n  display: inline-block;\n  padding: 10upx 20upx;\n  margin: 10upx;\n  background-color: #e0e0e0;\n  border-radius: 20upx;\n  cursor: pointer;\n  text-align: center;\n}\n\n.tag-item text {\n  font-size: 24upx;\n  color: #666;\n}\n\n.recommend-section {\n  margin: 20upx;\n  padding: 20upx;\n  background-color: #fff;\n  border-radius: 10upx;\n  box-shadow: 0 2upx 10upx rgba(0, 0, 0, 0.1);\n}\n\n.book-list {\n  white-space: nowrap;\n  overflow-x: auto;\n}\n\n.book-item {\n  display: inline-block;\n  width: 200upx;\n  margin-right: 20upx;\n  text-align: center;\n}\n\n.book-image {\n  width: 180upx;\n  height: 270upx;\n  border-radius: 10upx;\n}\n\n.book-name {\n  font-size: 28upx;\n  color: #333;\n  margin-top: 10upx;\n}\n\n.tabbar {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 100upx;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  background-color: #fff;\n  box-shadow: 0 -2upx 10upx rgba(0, 0, 0, 0.1);\n  z-index: 999;\n}\n\n.tabbar navigator {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.tabbar navigator text {\n  font-size: 24upx;\n  color: #666;\n}\n</style>","import MiniProgramPage from 'E:/uniapp工作空间/Science _fiction/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["searchText","ref","swiperList","AllBooks","classicBooks","hotBooks","Booktopic","goToDetail","item","uni","get_swpier_img","response","Get_Swiper","error","get_books_img","Get_All_Books","searchNovel","filterByTag","tagName","onMounted","MiniProgramPage"],"mappings":"4GAmEA,IAAIA,EAAaC,EAAAA,IAAI,EAAE,EAGnBC,EAAaD,EAAAA,IAAI,CAAA,CAAE,EACnBE,EAAWF,EAAAA,IAAI,CAAA,CAAE,EACjBG,EAAeH,EAAAA,IAAI,CAAA,CAAE,EACrBI,EAAWJ,EAAAA,IAAI,CAAA,CAAE,EACjBK,EAAYL,EAAAA,IAAI,CAAA,CAAE,EAEXA,EAAAA,IAAI,CACb,CAAE,KAAM,MAAQ,EAChB,CAAE,KAAM,MAAQ,EAChB,CAAE,KAAM,KAAO,CAEjB,CAAC,EAQD,IAAIM,EAAcC,GAAS,CACzBC,EAAAA,MAAI,eAAe,UAAWD,CAAI,EAClCC,EAAAA,MAAI,WAAW,CACb,IAAK,2BAA2B,KAAK,UAAUD,EAAK,OAAO,CAAC,EAChE,CAAG,CACH,EAEA,eAAeE,GAAiB,CAC9B,GAAI,CACF,MAAMC,EAAW,MAAMF,EAAG,MAAC,QAAQ,CACjC,IAAKG,EAAU,WACf,OAAQ,KACd,CAAK,EACDV,EAAW,MAAQS,EAAS,IAC7B,OAAQE,EAAO,CACdJ,EAAc,MAAA,MAAA,QAAA,+BAAA,yBAA0BI,CAAK,CAC9C,CACH,CAEA,eAAeC,GAAgB,CAC7B,GAAI,CACF,MAAMH,EAAW,MAAMF,EAAG,MAAC,QAAQ,CACjC,IAAKM,EAAa,cAClB,OAAQ,KACd,CAAK,EACDZ,EAAS,MAAQQ,EAAS,KAC1BP,EAAa,MAAQD,EAAS,MAAM,OAAOK,GAAQA,EAAK,IAAI,SAAS,SAAS,CAAC,EAC/EH,EAAS,MAAQF,EAAS,MAAM,OAAOK,GAAQA,EAAK,IAAI,SAAS,KAAK,CAAC,EACvEF,EAAU,MAAQ,CAAC,GAAG,IAAI,IAAIH,EAAS,MAAM,IAAIK,GAAQA,EAAK,KAAK,EAAE,KAAK,GAAG,EAAE,MAAM,GAAG,CAAC,CAAC,CAC3F,OAAQK,EAAO,CACdJ,EAAA,MAAA,MAAA,QAAA,+BAAc,wBAAyBI,CAAK,CAC7C,CACH,CAEA,IAAIG,EAAc,IAAM,CAClBhB,EAAW,OACbS,EAAAA,MAAI,WAAW,CACb,IAAK,gCAAkC,mBAAmBT,EAAW,KAAK,CAChF,CAAK,CAEL,EAEIiB,EAAeC,GAAY,CAC7BT,EAAAA,MAAI,WAAW,CACb,IAAK,4BAA8BS,CACvC,CAAG,CACH,EAEAC,OAAAA,EAAAA,UAAU,IAAM,CACdT,IACAI,GACF,CAAC,4gBC3ID,GAAG,WAAWM,CAAe"}