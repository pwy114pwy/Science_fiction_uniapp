{"version":3,"file":"detail.js","sources":["pages/detail/detail.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvZGV0YWlsL2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 书籍详细信息 -->\r\n\t\t<view class=\"book-details\">\r\n\t\t\t<view class=\"book-cover\">\r\n\t\t\t\t<image :src=\"book.Img_Url\" mode=\"aspectFit\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"book-info\">\r\n\t\t\t\t<p class=\"book-title\">{{ book.Book_Name }}</p>\r\n\t\t\t\t<p class=\"author\">作者: {{ book.Author }}</p>\r\n\t\t\t\t<p class=\"topic\">主题: {{ book.Topic }}</p>\r\n\t\t\t\t<p class=\"rating\">\r\n\t\t\t\t\t<strong>评分:</strong>\r\n\t\t\t\t\t<uni-rate :touchable=\"false\" v-model=\"book.Rating\" />\r\n\t\t\t\t</p>\r\n\t\t\t\t<!-- 收藏按钮 -->\r\n\t\t\t\t<view class=\"favorite-button\">\r\n\t\t\t\t\t<button @click=\"toggleFavorite\" :class=\"{ 'favorited': isFavorited, 'custom-button': true }\">\r\n\t\t\t\t\t\t{{ isFavorited ? '已收藏' : '收藏' }}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\" style=\"position: relative;\">\r\n\t\t\t\t<uni-icons @click=\"to_Illustrated\" style=\"position: absolute;top: -130px;right:-20px\"\r\n\t\t\t\t\ttype=\"images-filled\" size=\"50\"></uni-icons>\r\n\t\t\t\t<text\r\n\t\t\t\t\tstyle=\"position: absolute;color: red;;font-size:15px; top:-90px;left:-20px;width: 40px;\">图鉴</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 书籍简介 -->\r\n\t\t<view class=\"book-description\">\r\n\t\t\t<h2>书籍简介</h2>\r\n\t\t\t<p :class=\"{ 'expanded': isExpanded_book }\" v-if=\"!isExpanded_book\">{{ text_book }}...\r\n\t\t\t\t<a @click=\"isExpanded_book = !isExpanded_book\"\r\n\t\t\t\t\tclass=\"expand-link\">{{ isExpanded_book ? '收起' : '展开' }}</a>\r\n\t\t\t</p>\r\n\t\t\t<p v-else>{{ book.Book_Introduce }}\r\n\t\t\t\t<a @click=\"isExpanded_book = !isExpanded_book\"\r\n\t\t\t\t\tclass=\"expand-link\">{{ isExpanded_book ? '收起' : '展开' }}</a>\r\n\t\t\t</p>\r\n\t\t</view>\r\n\r\n\t\t<!-- 作者简介 -->\r\n\t\t<view class=\"author-biography\">\r\n\t\t\t<h2>作者简介</h2>\r\n\t\t\t<p :class=\"{ 'expanded': isExpanded_author }\" v-if=\"!isExpanded_author\">{{ text_author }}...\r\n\t\t\t\t<a @click=\"isExpanded_author = !isExpanded_author\"\r\n\t\t\t\t\tclass=\"expand-link\">{{ isExpanded_author ? '收起' : '展开' }}</a>\r\n\t\t\t</p>\r\n\t\t\t<p v-else>{{ book.Author_Introduction }}\r\n\t\t\t\t<a @click=\"isExpanded_author = !isExpanded_author\"\r\n\t\t\t\t\tclass=\"expand-link\">{{ isExpanded_author ? '收起' : '展开' }}</a>\r\n\t\t\t</p>\r\n\t\t</view>\r\n\r\n\t\t<!-- 书籍简评 -->\r\n\t\t<view class=\"book-reviews\">\r\n\t\t\t<h2>书籍简评</h2>\r\n\t\t\t<view class=\"review-item\" v-for=\"(review, index) in book.Book_Comment\" :key=\"index\">\r\n\t\t\t\t<p><text style=\"color: blue;\">{{review.Comment_User_NickName}}</text> <text\r\n\t\t\t\t\t\tstyle=\"color: coral;font-size: 13px;\">{{review.Comment_Time}}</text> <uni-icons\r\n\t\t\t\t\t\t@click=\"deleteCommentStart(review.Book_Comment_ID)\"\r\n\t\t\t\t\t\tv-if=\"review.Comment_User_Name==user.username\" style=\"float: right;\" type=\"trash\"\r\n\t\t\t\t\t\tsize=\"15\"></uni-icons></p>\r\n\t\t\t\t<p>{{ review.Comment_Content }}</p>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 发表评论 -->\r\n\t\t<view class=\"add-comment\">\r\n\t\t\t<h2>发表评论</h2>\r\n\t\t\t<form>\r\n\t\t\t\t<textarea v-model=\"newComment.Content\" placeholder=\"写下你的评论...\" required></textarea>\r\n\t\t\t\t<button @click=\"submitComment\" type=\"submit\" class=\"custom-button submit-comment\">提交评论</button>\r\n\t\t\t</form>\r\n\t\t</view>\r\n\r\n\t\t<!-- 分享按钮 -->\r\n\t\t<button data-name=\"shareBtn\" open-type=\"share\" class=\"custom-button share-button\">转发</button>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script setup>\r\n\timport {\r\n\t\tref,\r\n\t\tonMounted\r\n\t} from 'vue';\r\n\timport {\r\n\t\tonLoad,\r\n\t\tonShareAppMessage\r\n\t} from '@dcloudio/uni-app';\r\n\timport {\r\n\t\tGet_DetailBook,\r\n\t\tCollect_Book,\r\n\t\tUNCOLLECT_BOOK,\r\n\t\tGET_USER_COLLECT_BOOK,\r\n\t\tInsert_BrowseHistory,\r\n\t\tAddBook_Comment,\r\n\t\tDeleteBook_Comment\r\n\t} from '@/api'\r\n\tlet isExpanded_book = ref(false);\r\n\tlet isExpanded_author = ref(false);\r\n\tlet isLoggedIn = ref(false);\r\n\tlet book = ref({});\r\n\tlet text_book = ref(\"\")\r\n\tlet text_author = ref(\"\")\r\n\tlet book1 = (uni.getStorageSync('NowBook'));\r\n\tlet user = {};\r\n\tif (uni.getStorageSync('userInfo')) {\r\n\t\tisLoggedIn.value = true;\r\n\t\tuser = JSON.parse(uni.getStorageSync('userInfo'));\r\n\t} else {\r\n\t\tisLoggedIn.value = false;\r\n\t\tuser = {};\r\n\t}\r\n\r\n\tlet isFavorited = ref(false);\r\n\r\n\r\n\t//点击跳转到图鉴\r\n\tfunction to_Illustrated() {\r\n\t\tuni.setStorageSync('NowIllustrated', book1);\r\n\t\tuni.navigateTo({\r\n\t\t\turl: `/pages/Illustrated_detail/Illustrated_detail?id=${book1.Book_ID}`\r\n\t\t});\r\n\t}\r\n\r\n\t//发送获取书籍详情的请求\r\n\tasync function fetchBookDetails(bookId) {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: Get_DetailBook,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tbookId\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tbook.value = response.data.data;\r\n\t\t\ttext_book.value = response.data.data.Book_Introduce.slice(0, 90)\r\n\t\t\ttext_author.value = response.data.data.Author_Introduction.slice(0, 60)\r\n\t\t\tconsole.log(response.data.data);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching book details:', error);\r\n\t\t}\r\n\t}\r\n\t//发送获取书籍收藏的请求\r\n\tasync function fetchBookCollect() {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: Collect_Book,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tUser_Name: user.username,\r\n\t\t\t\t\tBook_ID: book1.Book_ID,\r\n\t\t\t\t\tBook_Name: book1.Book_Name,\r\n\t\t\t\t\tCollect_Time: gettime(),\r\n\t\t\t\t\tImg_Url: book1.Img_Url\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching book collect:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t//发送取消收藏的请求\r\n\tasync function fetchBookCancelCollect() {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: UNCOLLECT_BOOK,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tUser_Name: user.username,\r\n\t\t\t\t\tBook_ID: book1.Book_ID,\r\n\t\t\t\t\tBook_Name: book1.Book_Name,\r\n\t\t\t\t\tCollect_Time: new Date()\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching book collect:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t//获取所有书籍\r\n\tasync function getAllBookCollect() {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: GET_USER_COLLECT_BOOK,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tUser_Name: user.username,\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tisFavorited.value = response.data.some((item) => item.Book_ID == book1.Book_ID);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching book collect:', error);\r\n\t\t}\r\n\t}\r\n\r\n\t//提示还未登录\r\n\tfunction toggleFavorite() {\r\n\t\tif (!isLoggedIn.value) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\r\n\t\t\t\tshowCancel: true,\r\n\t\t\t\tcancelText: '取消',\r\n\t\t\t\tconfirmText: '确定',\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!isFavorited.value) {\r\n\t\t\tfetchBookCollect();\r\n\t\t} else {\r\n\t\t\tfetchBookCancelCollect();\r\n\t\t}\r\n\r\n\t\tisFavorited.value = !isFavorited.value;\r\n\t}\r\n\r\n\t//书籍浏览的请求\r\n\tasync function BookBrowse() {\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: Insert_BrowseHistory,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tUser_Name: user.username,\r\n\t\t\t\t\tBook_ID: book1.Book_ID,\r\n\t\t\t\t\tBook_Name: book1.Book_Name,\r\n\t\t\t\t\tBrowse_Time: gettime(),\r\n\t\t\t\t\tImg_Url: book1.Img_Url\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error fetching book collect:', error);\r\n\t\t}\r\n\t}\r\n\r\n\tlet goBack = () => {\r\n\t\tuni.navigateBack();\r\n\t};\r\n\r\n\t//获取当前时间\r\n\tlet gettime = () => {\r\n\t\tlet date = new Date();\r\n\t\tlet year = date.getFullYear();\r\n\t\tlet month = date.getMonth() + 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\r\n\t\tlet day = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\r\n\t\tlet hours = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\r\n\t\tlet minutes = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\r\n\t\tlet seconds = date.getSeconds() < 10 ? \"0\" + date.getSeconds() : date.getSeconds();\r\n\t\treturn year + \"年\" + month + \"月\" + day + \"日\" + hours + \":\" + minutes + \":\" + seconds;\r\n\t}\r\n\r\n\t//分享功能\r\n\tonShareAppMessage((res) => {\r\n\t\tlet shareObj = {\r\n\t\t\ttitle: book.value.Book_Name,\r\n\t\t\tpath: `/pages/detail/detail?id=${JSON.stringify(book.value.Book_Id)}`,\r\n\t\t\timageUrl: book.value.Img_Url,\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tif (res.errMsg === 'shareAppMessage:ok') {\r\n\t\t\t\t\tconsole.log('分享成功');\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tfail: function(res) {\r\n\t\t\t\tif (res.errMsg === 'shareAppMessage:fail cancel') {\r\n\t\t\t\t\tconsole.log('用户取消分享');\r\n\t\t\t\t} else if (res.errMsg === 'shareAppMessage:fail') {\r\n\t\t\t\t\tconsole.error('分享失败:', res.errMsg);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcomplete: function() {\r\n\t\t\t\tconsole.log('分享结束');\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (res.from === 'button') {\r\n\t\t\tconst eData = res.target.dataset;\r\n\t\t\tconsole.log(eData.name);\r\n\t\t\tshareObj.path = `/pages/btnname/btnname?btn_name=${eData.name}`;\r\n\t\t}\r\n\r\n\t\treturn shareObj;\r\n\t});\r\n\r\n\t// 新增的评论内容\r\n\tlet newComment = ref({\r\n\t\tContent: '',\r\n\t\tComment_User_NickName: user.nickname || '匿名用户',\r\n\t\tComment_Time: ''\r\n\t});\r\n\r\n\t// 提交评论的方法\r\n\tasync function submitComment() {\r\n\t\tif (!isLoggedIn.value) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '您尚未登录，是否前往登录页面？',\r\n\t\t\t\tshowCancel: true,\r\n\t\t\t\tcancelText: '取消',\r\n\t\t\t\tconfirmText: '确定',\r\n\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl: '/pages/login/login'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (newComment.value.Content == '') {\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '不能为空',\r\n\t\t\t\ticon: 'error',\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t// 设置评论时间\r\n\t\tnewComment.value.Comment_Time = gettime();\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: AddBook_Comment,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tComment_User_Name: user.username,\r\n\t\t\t\t\tComment_User_NickName: newComment.value.Comment_User_NickName,\r\n\t\t\t\t\tBook_ID: book1.Book_ID,\r\n\t\t\t\t\tBook_Name: book1.Book_Name,\r\n\t\t\t\t\tComment_Content: newComment.value.Content,\r\n\t\t\t\t\tComment_Time: newComment.value.Comment_Time\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 成功后清空输入框并刷新评论列表\r\n\t\t\tnewComment.value.Content = '';\r\n\t\t\tfetchBookDetails(book1.Book_ID); // 或者直接更新book对象中的评论数据\r\n\t\t\tconsole.log(response);\r\n\t\t\tif (response.statusCode == 200) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '评论成功',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('Error submitting comment:', error);\r\n\t\t\tuni.showToast({\r\n\t\t\t\ttitle: '评论失败，请重试',\r\n\t\t\t\ticon: 'none',\r\n\t\t\t\tduration: 2000\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\t//删除评论\r\n\tfunction deleteCommentStart(Book_Comment_ID) {\r\n\t\tuni.showModal({\r\n\t\t\ttitle: '提示',\r\n\t\t\tcontent: '您确定要删除吗？',\r\n\t\t\tshowCancel: true,\r\n\t\t\tcancelText: '取消',\r\n\t\t\tconfirmText: '确定',\r\n\t\t\tsuccess: function(res) {\r\n\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\tdeleteComment(Book_Comment_ID)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t//删除评论\r\n\tasync function deleteComment(Book_Comment_ID) {\r\n\r\n\t\tconsole.log(Book_Comment_ID);\r\n\t\ttry {\r\n\t\t\tconst response = await uni.request({\r\n\t\t\t\turl: DeleteBook_Comment,\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tComment_User_Name: user.username,\r\n\t\t\t\t\tBook_Comment_ID: Book_Comment_ID\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\tif (response.statusCode == 200) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '删除成功',\r\n\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfetchBookDetails(book1.Book_ID);\r\n\t\t} catch (error) {\r\n\t\t\t//TODO handle the exception\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//拿到其他页面传过来的书籍ID\r\n\tonLoad((options) => {\r\n\t\tconst id = JSON.parse(options.id);\r\n\t\tgetAllBookCollect();\r\n\t\tfetchBookDetails(id);\r\n\t\tBookBrowse();\r\n\t});\r\n</script>\r\n\r\n<style scoped>\r\n\t.container {\r\n\t\tpadding: 20px;\r\n\t\tfont-family: 'Helvetica Neue', Arial, sans-serif;\r\n\t\tbackground-color: #f4f4f4;\r\n\t\tmin-height: 100vh;\r\n\t\tbox-sizing: border-box;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t/* 返回按钮（隐藏的） */\r\n\t.back-button .custom-button {\r\n\t\tbackground-color: #4CAF50;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tpadding: 10px 20px;\r\n\t\ttext-align: center;\r\n\t\ttext-decoration: none;\r\n\t\tdisplay: inline-block;\r\n\t\tfont-size: 16px;\r\n\t\tmargin: 4px 2px;\r\n\t\tcursor: pointer;\r\n\t\tborder-radius: 8px;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\t.back-button .custom-button:hover {\r\n\t\tbackground-color: #45a049;\r\n\t}\r\n\r\n\t/* 书籍详细信息部分 */\r\n\t.book-details {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 30px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tpadding: 20px;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.book-cover image {\r\n\t\twidth: 120px;\r\n\t\theight: 200px;\r\n\t\tobject-fit: cover;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-right: 20px;\r\n\t\tbox-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.book-info {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 100%;\r\n\t}\r\n\r\n\t.book-title {\r\n\t\tfont-size: 28px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.author,\r\n\t.topic {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.rating {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.favorite-button .custom-button {\r\n\t\tbackground-color: #ff6b6b;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\tpadding: 10px 20px;\r\n\t\tfont-size: 16px;\r\n\t\tmargin-top: 10px;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\t.favorite-button .custom-button.favorited {\r\n\t\tbackground-color: #007bff;\r\n\t}\r\n\r\n\t.favorite-button .custom-button:hover {\r\n\t\tbackground-color: #f55858;\r\n\t}\r\n\r\n\t/* 书籍简介、作者简介部分 */\r\n\t.book-description,\r\n\t.author-biography {\r\n\t\tmargin-bottom: 20px;\r\n\t\tbackground-color: white;\r\n\t\tpadding: 15px;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.expand-link {\r\n\t\tcolor: #e74c3c;\r\n\t\tfont-size: 16px;\r\n\t\ttext-decoration: none;\r\n\t}\r\n\r\n\th2 {\r\n\t\tfont-size: 22px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.expanded {\r\n\t\twhite-space: normal;\r\n\t\tword-wrap: break-word;\r\n\t}\r\n\r\n\tp {\r\n\t\tline-height: 1.8;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t/* 书籍简评部分 */\r\n\t.book-reviews {\r\n\t\tmargin-bottom: 30px;\r\n\t}\r\n\r\n\t.review-item {\r\n\t\tbackground-color: white;\r\n\t\tpadding: 15px;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t\tmargin-bottom: 15px;\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #555;\r\n\t}\r\n\r\n\t/* 分享按钮 */\r\n\t.share-button {\r\n\t\tbackground-color: #3498db;\r\n\t\tcolor: white;\r\n\t\tpadding: 12px 20px;\r\n\t\tborder: none;\r\n\t\tfont-size: 16px;\r\n\t\tborder-radius: 8px;\r\n\t\twidth: 100%;\r\n\t\tmargin-top: 20px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\t.share-button:hover {\r\n\t\tbackground-color: #2980b9;\r\n\t}\r\n\r\n\r\n\r\n\t.add-comment {\r\n\t\tmargin-bottom: 20px;\r\n\t\tbackground-color: white;\r\n\t\tpadding: 15px;\r\n\t\tborder-radius: 8px;\r\n\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.add-comment h2 {\r\n\t\tfont-size: 22px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.add-comment textarea {\r\n\t\twidth: 100%;\r\n\t\theight: 100px;\r\n\t\tpadding: 10px;\r\n\t\tfont-size: 16px;\r\n\t\tborder: 1px solid #ddd;\r\n\t\tborder-radius: 4px;\r\n\t\tresize: none;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.submit-comment {\r\n\t\tbackground-color: #3498db;\r\n\t\tcolor: white;\r\n\t\tpadding: 10px 20px;\r\n\t\tborder: none;\r\n\t\tfont-size: 16px;\r\n\t\tborder-radius: 8px;\r\n\t\tcursor: pointer;\r\n\t\ttransition: background-color 0.3s ease;\r\n\t}\r\n\r\n\t.submit-comment:hover {\r\n\t\tbackground-color: #2980b9;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/uniapp工作空间/Science _fiction/pages/detail/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["isExpanded_book","ref","isExpanded_author","isLoggedIn","book","text_book","text_author","book1","uni","user","isFavorited","to_Illustrated","fetchBookDetails","bookId","response","Get_DetailBook","error","fetchBookCollect","Collect_Book","gettime","fetchBookCancelCollect","UNCOLLECT_BOOK","getAllBookCollect","GET_USER_COLLECT_BOOK","item","toggleFavorite","res","BookBrowse","Insert_BrowseHistory","date","year","month","day","hours","minutes","seconds","onShareAppMessage","shareObj","eData","newComment","submitComment","AddBook_Comment","deleteCommentStart","Book_Comment_ID","deleteComment","DeleteBook_Comment","onLoad","options","id","MiniProgramPage"],"mappings":"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"}