{"version":3,"file":"canvas.js","sources":["uni_modules/lime-echart/components/l-echart/canvas.js"],"sourcesContent":["import {getDeviceInfo} from './utils';\r\n\r\nconst cacheChart = {}\r\nconst fontSizeReg = /([\\d\\.]+)px/;\r\nclass EventEmit {\n\tconstructor() {\n\t\tthis.__events = {};\n\t}\n\ton(type, listener) {\n\t\tif (!type || !listener) {\n\t\t\treturn;\n\t\t}\n\t\tconst events = this.__events[type] || [];\n\t\tevents.push(listener);\n\t\tthis.__events[type] = events;\n\t}\n\temit(type, e) {\n\t\tif (type.constructor === Object) {\n\t\t\te = type;\n\t\t\ttype = e && e.type;\n\t\t}\n\t\tif (!type) {\n\t\t\treturn;\n\t\t}\n\t\tconst events = this.__events[type];\n\t\tif (!events || !events.length) {\n\t\t\treturn;\n\t\t}\n\t\tevents.forEach((listener) => {\n\t\t\tlistener.call(this, e);\n\t\t});\n\t}\n\toff(type, listener) {\n\t\tconst __events = this.__events;\n\t\tconst events = __events[type];\n\t\tif (!events || !events.length) {\n\t\t\treturn;\n\t\t}\n\t\tif (!listener) {\n\t\t\tdelete __events[type];\n\t\t\treturn;\n\t\t}\n\t\tfor (let i = 0, len = events.length; i < len; i++) {\n\t\t\tif (events[i] === listener) {\n\t\t\t\tevents.splice(i, 1);\n\t\t\t\ti--;\n\t\t\t}\n\t\t}\n\t}\n}\r\nclass Image {\r\n\tconstructor() {\r\n\t\tthis.currentSrc = null\r\n\t\tthis.naturalHeight = 0\r\n\t\tthis.naturalWidth = 0\r\n\t\tthis.width = 0\r\n\t\tthis.height = 0\r\n\t\tthis.tagName = 'IMG'\r\n\t}\r\n\tset src(src) {\r\n\t\tthis.currentSrc = src\r\n\t\tuni.getImageInfo({\r\n\t\t\tsrc,\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tthis.naturalWidth = this.width = res.width\r\n\t\t\t\tthis.naturalHeight = this.height = res.height\r\n\t\t\t\tthis.onload()\r\n\t\t\t},\r\n\t\t\tfail: () => {\r\n\t\t\t\tthis.onerror()\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tget src() {\r\n\t\treturn this.currentSrc\r\n\t}\r\n}\r\nclass OffscreenCanvas {\r\n\tconstructor(ctx, com, canvasId) {\r\n\t\tthis.tagName = 'canvas'\r\n\t\tthis.com = com\r\n\t\tthis.canvasId = canvasId\r\n\t\tthis.ctx = ctx\r\n\t}\r\n\tset width(w) {\r\n\t\tthis.com.offscreenWidth = w\r\n\t}\r\n\tset height(h) {\r\n\t\tthis.com.offscreenHeight = h\r\n\t}\r\n\tget width() {\r\n\t\treturn this.com.offscreenWidth || 0\r\n\t}\r\n\tget height() {\r\n\t\treturn this.com.offscreenHeight || 0\r\n\t}\r\n\tgetContext(type) {\r\n\t\treturn this.ctx\r\n\t}\r\n\tgetImageData() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.com.$nextTick(() => {\r\n\t\t\t\tuni.canvasGetImageData({\r\n\t\t\t\t\tx:0,\r\n\t\t\t\t\ty:0,\r\n\t\t\t\t\twidth: this.com.offscreenWidth,\r\n\t\t\t\t\theight: this.com.offscreenHeight,\r\n\t\t\t\t\tcanvasId: this.canvasId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tresolve(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t},\r\n\t\t\t\t}, this.com)\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n}\r\nexport class Canvas {\r\n\tconstructor(ctx, com, isNew, canvasNode={}) {\r\n\t\tcacheChart[com.canvasId] = {ctx}\r\n\t\tthis.canvasId = com.canvasId;\r\n\t\tthis.chart = null;\r\n\t\tthis.isNew = isNew\r\n\t\tthis.tagName = 'canvas'\r\n\t\tthis.canvasNode = canvasNode;\r\n\t\tthis.com = com;\r\n\t\tif (!isNew) {\r\n\t\t\tthis._initStyle(ctx)\r\n\t\t}\r\n\t\tthis._initEvent();\r\n\t\tthis._ee = new EventEmit()\r\n\t}\r\n\tgetContext(type) {\r\n\t\tif (type === '2d') {\r\n\t\t\treturn this.ctx;\r\n\t\t}\r\n\t}\r\n\tsetAttribute(key, value) {\r\n\t\tif(key === 'aria-label') {\r\n\t\t\tthis.com['ariaLabel'] = value\r\n\t\t}\r\n\t}\r\n\tsetChart(chart) {\r\n\t\tthis.chart = chart;\r\n\t}\r\n\tcreateOffscreenCanvas(param){\r\n\t\tif(!this.children) {\r\n\t\t\tthis.com.isOffscreenCanvas = true\r\n\t\t\tthis.com.offscreenWidth = param.width||300\r\n\t\t\tthis.com.offscreenHeight = param.height||300\r\n\t\t\tconst com = this.com\r\n\t\t\tconst canvasId = this.com.offscreenCanvasId\r\n\t\t\tconst context = uni.createCanvasContext(canvasId, this.com)\r\n\t\t\tthis._initStyle(context)\r\n\t\t\tthis.children = new OffscreenCanvas(context, com, canvasId)\r\n\t\t} \r\n\t\treturn this.children\r\n\t}\r\n\tappendChild(child) {\r\n\t\tconsole.log('child', child)\r\n\t}\r\n\tdispatchEvent(type, e) {\r\n\t\tif(typeof type == 'object') {\r\n\t\t\tthis._ee.emit(type.type, type);\r\n\t\t} else {\r\n\t\t\tthis._ee.emit(type, e);\r\n\t\t}\r\n\t\treturn true\r\n\t}\r\n\tattachEvent() {\r\n\t}\r\n\tdetachEvent() {\r\n\t}\r\n\taddEventListener(type, listener) {\r\n\t\tthis._ee.on(type, listener)\r\n\t}\r\n\tremoveEventListener(type, listener) {\r\n\t\tthis._ee.off(type, listener)\r\n\t}\r\n\t_initCanvas(zrender, ctx) {\r\n\t\t// zrender.util.getContext = function() {\r\n\t\t// \treturn ctx;\r\n\t\t// };\r\n\t\t// zrender.util.$override('measureText', function(text, font) {\r\n\t\t// \tctx.font = font || '12px sans-serif';\r\n\t\t// \treturn ctx.measureText(text, font);\r\n\t\t// });\r\n\t}\r\n\t_initStyle(ctx, child) {\r\n\t\tconst styles = [\r\n\t\t\t'fillStyle',\r\n\t\t\t'strokeStyle',\r\n\t\t\t'fontSize',\r\n\t\t\t'globalAlpha',\r\n\t\t\t'opacity',\r\n\t\t\t'textAlign',\r\n\t\t\t'textBaseline',\r\n\t\t\t'shadow',\r\n\t\t\t'lineWidth',\r\n\t\t\t'lineCap',\r\n\t\t\t'lineJoin',\r\n\t\t\t'lineDash',\r\n\t\t\t'miterLimit',\r\n\t\t\t// #ifdef H5\r\n\t\t\t'font',\r\n\t\t\t// #endif\r\n\t\t];\r\n\t\tconst colorReg = /#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])\\b/g;\r\n\t\tstyles.forEach(style => {\r\n\t\t\tObject.defineProperty(ctx, style, {\r\n\t\t\t\tset: value => {\r\n\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\tif (style === 'font' && fontSizeReg.test(value)) {\r\n\t\t\t\t\t\tconst match = fontSizeReg.exec(value);\r\n\t\t\t\t\t\tctx.setFontSize(match[1]);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (style === 'opacity') {\r\n\t\t\t\t\t\tctx.setGlobalAlpha(value)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (style !== 'fillStyle' && style !== 'strokeStyle' || value !== 'none' && value !== null) {\r\n\t\t\t\t\t\t// #ifdef H5 || APP-PLUS || MP-BAIDU\r\n\t\t\t\t\t\tif(typeof value == 'object') {\r\n\t\t\t\t\t\t\tif (value.hasOwnProperty('colorStop') || value.hasOwnProperty('colors')) {\r\n\t\t\t\t\t\t\t\tctx['set' + style.charAt(0).toUpperCase() + style.slice(1)](value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\t\t\t\tif(colorReg.test(value)) {\r\n\t\t\t\t\t\t\tvalue = value.replace(colorReg, '#$1$1$2$2$3$3')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tctx['set' + style.charAt(0).toUpperCase() + style.slice(1)](value);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\tif(!this.isNew && !child) {\r\n\t\t\tctx.uniDrawImage = ctx.drawImage\r\n\t\t\tctx.drawImage = (...a) => {\r\n\t\t\t\ta[0] = a[0].src\r\n\t\t\t\tctx.uniDrawImage(...a)\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!ctx.createRadialGradient) {\r\n\t\t\tctx.createRadialGradient = function() {\r\n\t\t\t\treturn ctx.createCircularGradient(...[...arguments].slice(-3))\r\n\t\t\t};\r\n\t\t}\r\n\t\t// 字节不支持\r\n\t\tif (!ctx.strokeText) {\r\n\t\t\tctx.strokeText = (...a) => {\r\n\t\t\t\tctx.fillText(...a)\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// 钉钉不支持 , 鸿蒙是异步\r\n\t\tif (!ctx.measureText || getDeviceInfo().osName == 'harmonyos') {\r\n\t\t\tctx._measureText = ctx.measureText\r\n\t\t\tconst strLen = (str) => {\r\n\t\t\t\tlet len = 0;\r\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\t\t\t\t\tif (str.charCodeAt(i) > 0 && str.charCodeAt(i) < 128) {\r\n\t\t\t\t\t\tlen++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlen += 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn len;\r\n\t\t\t}\r\n\t\t\tctx.measureText = (text, font) => {\r\n\t\t\t\tlet fontSize = ctx?.state?.fontSize || 12;\r\n\t\t\t\tif (font) {\r\n\t\t\t\t\tfontSize = parseInt(font.match(/([\\d\\.]+)px/)[1])\r\n\t\t\t\t}\r\n\t\t\t\tfontSize /= 2;\r\n\t\t\t\tlet isBold = fontSize >= 16;\r\n\t\t\t\tconst widthFactor = isBold ? 1.3 : 1;\r\n\t\t\t\t// ctx._measureText(text, (res) => {})\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: strLen(text) * fontSize * widthFactor\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t_initEvent(e) {\r\n\t\tthis.event = {};\r\n\t\tconst eventNames = [{\r\n\t\t\twxName: 'touchStart',\r\n\t\t\tecName: 'mousedown'\r\n\t\t}, {\r\n\t\t\twxName: 'touchMove',\r\n\t\t\tecName: 'mousemove'\r\n\t\t}, {\r\n\t\t\twxName: 'touchEnd',\r\n\t\t\tecName: 'mouseup'\r\n\t\t}, {\r\n\t\t\twxName: 'touchEnd',\r\n\t\t\tecName: 'click'\r\n\t\t}];\r\n\r\n\t\teventNames.forEach(name => {\r\n\t\t\tthis.event[name.wxName] = e => {\r\n\t\t\t\tconst touch = e.touches[0];\r\n\t\t\t\tthis.chart.getZr().handler.dispatch(name.ecName, {\r\n\t\t\t\t\tzrX: name.wxName === 'tap' ? touch.clientX : touch.x,\r\n\t\t\t\t\tzrY: name.wxName === 'tap' ? touch.clientY : touch.y\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tset width(w) {\r\n\t\tthis.canvasNode.width = w\r\n\t}\r\n\tset height(h) {\r\n\t\tthis.canvasNode.height = h\r\n\t}\r\n\r\n\tget width() {\r\n\t\treturn this.canvasNode.width || 0\r\n\t}\r\n\tget height() {\r\n\t\treturn this.canvasNode.height || 0\r\n\t}\r\n\tget ctx() {\r\n\t\treturn cacheChart[this.canvasId]['ctx'] || null\r\n\t}\r\n\tset chart(chart) {\r\n\t\tcacheChart[this.canvasId]['chart'] = chart\r\n\t}\r\n\tget chart() {\r\n\t\treturn cacheChart[this.canvasId]['chart'] || null\r\n\t}\r\n}\r\n\r\nexport function dispatch(name, {x,y, wheelDelta}) {\r\n\tthis.dispatch(name, {\r\n\t\tzrX: x,\r\n\t\tzrY: y,\r\n\t\tzrDelta: wheelDelta,\r\n\t\tpreventDefault: () => {},\r\n\t\tstopPropagation: () =>{}\r\n\t});\r\n}\r\nexport function setCanvasCreator(echarts, {canvas, node}) {\r\n\t// echarts.setCanvasCreator(() => canvas);\r\n\tif(echarts && !echarts.registerPreprocessor) {\r\n\t\treturn console.warn('echarts 版本不对或未传入echarts，vue3请使用esm格式')\r\n\t}\r\n\techarts.registerPreprocessor(option => {\r\n\t\tif (option && option.series) {\r\n\t\t\tif (option.series.length > 0) {\r\n\t\t\t\toption.series.forEach(series => {\r\n\t\t\t\t\tseries.progressive = 0;\r\n\t\t\t\t});\r\n\t\t\t} else if (typeof option.series === 'object') {\r\n\t\t\t\toption.series.progressive = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tfunction loadImage(src, onload, onerror) {\r\n\t\tlet img = null\r\n\t\tif(node && node.createImage) {\r\n\t\t\timg = node.createImage()\r\n\t\t\timg.onload = onload.bind(img);\r\n\t\t\timg.onerror = onerror.bind(img);\r\n\t\t\timg.src = src;\r\n\t\t\treturn img\r\n\t\t} else {\r\n\t\t\timg = new Image()\r\n\t\t\timg.onload = onload.bind(img)\r\n\t\t\timg.onerror = onerror.bind(img);\r\n\t\t\timg.src = src\r\n\t\t\treturn img\r\n\t\t}\r\n\t}\r\n\tif(echarts.setPlatformAPI) {\r\n\t\techarts.setPlatformAPI({\r\n\t\t\tloadImage: canvas.setChart ? loadImage : null,\r\n\t\t\tcreateCanvas(){\r\n\t\t\t\tconst key = 'createOffscreenCanvas'\r\n\t\t\t\treturn uni.canIUse(key) && uni[key] ? uni[key]({type: '2d'}) : canvas\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n}"],"names":["cacheChart","EventEmit","type","listener","events","e","__events","i","len","Image","src","uni","res","OffscreenCanvas","ctx","com","canvasId","w","h","resolve","reject","err","Canvas","isNew","canvasNode","key","value","chart","param","context","child","zrender","style","a","getDeviceInfo","strLen","str","text","font","fontSize","_a","widthFactor","name","touch","dispatch","x","y","wheelDelta","setCanvasCreator","echarts","canvas","node","option","series","loadImage","onload","onerror","img"],"mappings":"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"}