{"version":3,"file":"l-echart.js","sources":["uni_modules/lime-echart/components/l-echart/l-echart.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovdW5pYXBw5bel5L2c56m66Ze0L1NjaWVuY2UgX2ZpY3Rpb24vdW5pX21vZHVsZXMvbGltZS1lY2hhcnQvY29tcG9uZW50cy9sLWVjaGFydC9sLWVjaGFydC52dWU"],"sourcesContent":["<template>\r\n\t<view class=\"lime-echart\" :style=\"[customStyle]\" v-if=\"canvasId\" ref=\"limeEchart\" :aria-label=\"ariaLabel\">\r\n\t\t<!-- #ifndef APP-NVUE -->\r\n\t\t<canvas\r\n\t\t\tclass=\"lime-echart__canvas\"\r\n\t\t\tv-if=\"use2dCanvas\"\r\n\t\t\ttype=\"2d\"\r\n\t\t\t:id=\"canvasId\"\r\n\t\t\t:style=\"canvasStyle\"\r\n\t\t\t:disable-scroll=\"isDisableScroll\"\r\n\t\t\t@touchstart=\"touchStart\"\r\n\t\t\t@touchmove=\"touchMove\"\r\n\t\t\t@touchend=\"touchEnd\"\r\n\t\t/>\r\n\t\t<canvas\r\n\t\t\tclass=\"lime-echart__canvas\"\r\n\t\t\tv-else\r\n\t\t\t:width=\"nodeWidth\"\r\n\t\t\t:height=\"nodeHeight\"\r\n\t\t\t:style=\"canvasStyle\"\r\n\t\t\t:canvas-id=\"canvasId\"\r\n\t\t\t:id=\"canvasId\"\r\n\t\t\t:disable-scroll=\"isDisableScroll\"\r\n\t\t\t@touchstart=\"touchStart\"\r\n\t\t\t@touchmove=\"touchMove\"\r\n\t\t\t@touchend=\"touchEnd\"\r\n\t\t/>\r\n\t\t<view class=\"lime-echart__mask\"\r\n\t\t\tv-if=\"isPC\"\r\n\t\t\t@mousedown=\"touchStart\"\r\n\t\t\t@mousemove=\"touchMove\"\r\n\t\t\t@mouseup=\"touchEnd\"\r\n\t\t\t@touchstart=\"touchStart\"\r\n\t\t\t@touchmove=\"touchMove\"\r\n\t\t\t@touchend=\"touchEnd\">\r\n\t\t</view>\r\n\t\t<canvas v-if=\"isOffscreenCanvas\" :style=\"offscreenStyle\" :canvas-id=\"offscreenCanvasId\"></canvas>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- #ifdef APP-NVUE -->\r\n\t\t<web-view\r\n\t\t\tclass=\"lime-echart__canvas\"\r\n\t\t\t:id=\"canvasId\"\r\n\t\t\t:style=\"canvasStyle\"\r\n\t\t\t:webview-styles=\"webviewStyles\"\r\n\t\t\tref=\"webview\"\r\n\t\t\tsrc=\"/uni_modules/lime-echart/static/uvue.html?v=1\"\r\n\t\t\t@pagefinish=\"finished = true\"\r\n\t\t\t@onPostMessage=\"onMessage\"\r\n\t\t></web-view>\r\n\t\t<!-- #endif -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n// @ts-nocheck\r\n// #ifndef APP-NVUE\r\nimport {Canvas, setCanvasCreator, dispatch} from './canvas';\r\nimport {wrapTouch, convertTouchesToArray, devicePixelRatio ,sleep, canIUseCanvas2d, getRect, getDeviceInfo} from './utils';\r\n// #endif\r\n// #ifdef APP-NVUE\r\nimport { base64ToPath, sleep } from './utils';\r\nimport {Echarts} from './nvue'\r\n// #endif\r\nconst charts = {}\r\nconst echartsObj = {}\r\n\r\n\r\n/**\r\n * LimeChart 图表\r\n * @description 全端兼容的eCharts\r\n * @tutorial https://ext.dcloud.net.cn/plugin?id=4899\r\n\r\n * @property {String} customStyle 自定义样式\r\n * @property {String} type 指定 canvas 类型\r\n * @value 2d 使用canvas 2d，部分小程序支持\r\n * @value '' 使用原生canvas，会有层级问题\r\n * @value bottom right\t不缩放图片，只显示图片的右下边区域\r\n * @property {Boolean} isDisableScroll\t \r\n * @property {number} beforeDelay = [30]  延迟初始化 (毫秒)\r\n * @property {Boolean} enableHover PC端使用鼠标悬浮\r\n\r\n * @event {Function} finished 加载完成触发\r\n */\r\nexport default {\r\n\tname: 'lime-echart',\r\n\tprops: {\r\n\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO\r\n\t\ttype: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '2d'\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef APP-NVUE\r\n\t\twebviewStyles: Object,\r\n\t\t// hybrid: Boolean,\r\n\t\t// #endif\r\n\t\tcustomStyle: String,\r\n\t\tisDisableScroll: Boolean,\r\n\t\tisClickable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\tenableHover: Boolean,\r\n\t\tbeforeDelay: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 30\r\n\t\t},\r\n\t\tlandscape: Boolean\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO || MP-ALIPAY\r\n\t\t\tuse2dCanvas: true,\r\n\t\t\t// #endif\r\n\t\t\t// #ifndef MP-WEIXIN || MP-TOUTIAO || MP-ALIPAY\r\n\t\t\tuse2dCanvas: false,\r\n\t\t\t// #endif\r\n\t\t\tariaLabel: '图表',\r\n\t\t\twidth: null,\r\n\t\t\theight: null,\r\n\t\t\tnodeWidth: null,\r\n\t\t\tnodeHeight: null,\r\n\t\t\t// canvasNode: null,\r\n\t\t\tconfig: {},\r\n\t\t\tinited: false,\r\n\t\t\tfinished: false,\r\n\t\t\tfile: '',\r\n\t\t\tplatform: '',\r\n\t\t\tisPC: false,\r\n\t\t\tisDown: false,\r\n\t\t\tisOffscreenCanvas: false,\r\n\t\t\toffscreenWidth: 0,\r\n\t\t\toffscreenHeight: 0,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\trootStyle() {\r\n\t\t\tif(this.landscape) {\r\n\t\t\t\treturn `transform: translate(-50%,-50%) rotate(90deg); top:50%; left:50%;`\r\n\t\t\t}\r\n\t\t},\r\n\t\tcanvasId() {\r\n\t\t\treturn `lime-echart${this._ && this._.uid || this._uid}`\r\n\t\t},\r\n\t\toffscreenCanvasId() {\r\n\t\t\treturn `${this.canvasId}_offscreen`\r\n\t\t},\r\n\t\toffscreenStyle() {\r\n\t\t\treturn `width:${this.offscreenWidth}px;height: ${this.offscreenHeight}px; position: fixed; left: 99999px; background: red`\r\n\t\t},\r\n\t\tcanvasStyle() {\r\n\t\t\treturn this.rootStyle + (this.width && this.height ? ('width:' + this.width + 'px;height:' + this.height + 'px') : '')\r\n\t\t}\r\n\t},\r\n\t// #ifndef VUE3\r\n\tbeforeDestroy() {\r\n\t\tthis.clear()\r\n\t\tthis.dispose()\r\n\t\t// #ifdef H5\r\n\t\tif(this.isPC) {\r\n\t\t\tdocument.removeEventListener('mousewheel', this.mousewheel)\r\n\t\t}\r\n\t\t// #endif\r\n\t},\r\n\t// #endif\r\n\t// #ifdef VUE3\r\n\tbeforeUnmount() {\r\n\t\tthis.clear()\r\n\t\tthis.dispose()\r\n\t\t// #ifdef H5\r\n\t\tif(this.isPC) {\r\n\t\t\tdocument.removeEventListener('mousewheel', this.mousewheel)\r\n\t\t}\r\n\t\t// #endif\r\n\t},\r\n\t// #endif\r\n\tcreated() {\r\n\t\t// #ifdef H5\r\n\t\tif(!('ontouchstart' in window)) {\r\n\t\t\tthis.isPC = true\r\n\t\t\tdocument.addEventListener('mousewheel', this.mousewheel)\r\n\t\t}\r\n\t\t// #endif\r\n\t\t// #ifdef MP-WEIXIN || MP-TOUTIAO || MP-ALIPAY\r\n\t\t// const { platform } = uni.getSystemInfoSync();\r\n\t\tconst { platform } = getDeviceInfo();\r\n\t\tthis.isPC = /windows/i.test(platform)\r\n\t\t// #endif\r\n\t\tthis.use2dCanvas = this.type === '2d' && canIUseCanvas2d()\r\n\t},\r\n\tmounted() {\r\n\t\tthis.$nextTick(() => {\r\n\t\t\tthis.$emit('finished')\r\n\t\t})\r\n\t},\r\n\tmethods: {\r\n\t\t// #ifdef APP-NVUE\r\n\t\tonMessage(e) {\r\n\t\t\tconst detail = e?.detail?.data[0] || null;\r\n\t\t\tconst data = detail?.data\r\n\t\t\tconst key = detail?.event\r\n\t\t\tconst options = data?.options\r\n\t\t\tconst event = data?.event\r\n\t\t\tconst file = detail?.file\r\n\t\t\tif (key == 'log' && data) {\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t}\r\n\t\t\tif(event) {\r\n\t\t\t\tthis.chart.dispatchAction(event.replace(/\"/g,''), options)\r\n\t\t\t}\r\n\t\t\tif(file) {\r\n\t\t\t\tthie.file = file\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\tsetChart(callback) {\r\n\t\t\tif(!this.chart) {\r\n\t\t\t\tconsole.warn(`组件还未初始化，请先使用 init`)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tif(typeof callback === 'function' && this.chart) {\r\n\t\t\t\tcallback(this.chart);\r\n\t\t\t}\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tif(typeof callback === 'function') {\r\n\t\t\t\tthis.$refs.webview.evalJs(`setChart(${JSON.stringify(callback.toString())}, ${JSON.stringify(this.chart.options)})`);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tsetOption() {\r\n\t\t\tif (!this.chart || !this.chart.setOption) {\r\n\t\t\t\tconsole.warn(`组件还未初始化，请先使用 init`)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis.chart.setOption(...arguments);\r\n\t\t},\r\n\t\tshowLoading() {\r\n\t\t\tif(this.chart) {\r\n\t\t\t\tthis.chart.showLoading(...arguments)\r\n\t\t\t}\r\n\t\t},\r\n\t\thideLoading() {\r\n\t\t\tif(this.chart) {\r\n\t\t\t\tthis.chart.hideLoading()\r\n\t\t\t}\r\n\t\t},\r\n\t\tclear() {\r\n\t\t\tif(this.chart) {\r\n\t\t\t\tthis.chart.clear()\r\n\t\t\t}\r\n\t\t},\r\n\t\tdispose() {\r\n\t\t\tif(this.chart) {\r\n\t\t\t\tthis.chart.dispose()\r\n\t\t\t}\r\n\t\t},\r\n\t\tresize(size) {\r\n\t\t\tif(size && size.width && size.height) {\r\n\t\t\t\tthis.height = size.height\r\n\t\t\t\tthis.width = size.width\r\n\t\t\t\tif(this.chart) {this.chart.resize(size)}\r\n\t\t\t} else {\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tuni.createSelectorQuery()\r\n\t\t\t\t\t\t.in(this)\r\n\t\t\t\t\t\t.select(`.lime-echart`)\r\n\t\t\t\t\t\t.boundingClientRect()\r\n\t\t\t\t\t\t.exec(res => {\r\n\t\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\t\tlet { width, height } = res[0];\r\n\t\t\t\t\t\t\t\tthis.width = width = width || 300;\r\n\t\t\t\t\t\t\t\tthis.height = height = height || 300;\r\n\t\t\t\t\t\t\t\tthis.chart.resize({width, height})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\tcanvasToTempFilePath(args = {}) {\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\tconst { use2dCanvas, canvasId } = this;\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tconst copyArgs = Object.assign({\r\n\t\t\t\t\tcanvasId,\r\n\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\tfail: reject\r\n\t\t\t\t}, args);\r\n\t\t\t\tif (use2dCanvas) {\r\n\t\t\t\t\tdelete copyArgs.canvasId;\r\n\t\t\t\t\tcopyArgs.canvas = this.canvasNode;\r\n\t\t\t\t}\r\n\t\t\t\tuni.canvasToTempFilePath(copyArgs, this);\r\n\t\t\t});\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tthis.file = ''\r\n\t\t\tthis.$refs.webview.evalJs(`canvasToTempFilePath()`);\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tthis.$watch('file', async (file) => {\r\n\t\t\t\t\tif(file) {\r\n\t\t\t\t\t\tconst tempFilePath = await base64ToPath(file)\r\n\t\t\t\t\t\tresolve(args.success({tempFilePath}))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(args.fail({error: ``}))\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tasync init(echarts, ...args) {\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\tif(args && args.length == 0 && !echarts) {\r\n\t\t\t\tconsole.error('缺少参数：init(echarts, theme?:string, opts?: object, callback?: function)')\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\tlet theme=null,opts={},callback;\r\n\t\t\t\r\n\t\t\tArray.from(arguments).forEach(item => {\r\n\t\t\t\tif(typeof item === 'function') {\r\n\t\t\t\t\tcallback = item\r\n\t\t\t\t}\r\n\t\t\t\tif(['string'].includes(typeof item)) {\r\n\t\t\t\t\ttheme = item\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof item === 'object') {\r\n\t\t\t\t\topts = item\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tif(this.beforeDelay) {\r\n\t\t\t\tawait sleep(this.beforeDelay)\r\n\t\t\t}\r\n\t\t\tlet config = await this.getContext();\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\tsetCanvasCreator(echarts, config)\r\n\t\t\ttry {\r\n\t\t\t\tthis.chart = echarts.init(config.canvas, theme, Object.assign({}, config, opts))\r\n\t\t\t\tif(typeof callback === 'function') {\r\n\t\t\t\t\tcallback(this.chart)\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.chart\r\n\t\t\t\t}\r\n\t\t\t} catch(e) {\r\n\t\t\t\tconsole.error(e.messges)\r\n\t\t\t\treturn null\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tthis.chart = new Echarts(this.$refs.webview)\r\n\t\t\tthis.$refs.webview.evalJs(`init(null, null, ${JSON.stringify(opts)}, ${theme})`)\r\n\t\t\tif(callback) {\r\n\t\t\t\tcallback(this.chart)\r\n\t\t\t} else {\r\n\t\t\t\treturn this.chart\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tgetContext() {\r\n\t\t\t// #ifdef APP-NVUE\r\n\t\t\tif(this.finished) {\r\n\t\t\t\treturn Promise.resolve(this.finished)\r\n\t\t\t}\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.$watch('finished', (val) => {\r\n\t\t\t\t\tif(val) {\r\n\t\t\t\t\t\tresolve(this.finished)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t\t// #ifndef APP-NVUE\r\n\t\t\treturn getRect(`#${this.canvasId}`, {context: this, type: this.use2dCanvas ? 'fields': 'boundingClientRect'}).then(res => {\r\n\t\t\t\tif(res) {\r\n\t\t\t\t\tlet dpr = devicePixelRatio\r\n\t\t\t\t\tlet {width, height, node} = res\r\n\t\t\t\t\tlet canvas;\r\n\t\t\t\t\tthis.width = width = width || 300;\r\n\t\t\t\t\tthis.height = height = height || 300;\r\n\t\t\t\t\tif(node) {\r\n\t\t\t\t\t\tconst ctx = node.getContext('2d');\r\n\t\t\t\t\t\tcanvas = new Canvas(ctx, this, true, node);\r\n\t\t\t\t\t\tthis.canvasNode = node\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// #ifdef MP-TOUTIAO\r\n\t\t\t\t\t\tdpr = !this.isPC ? devicePixelRatio : 1// 1.25\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifndef MP-ALIPAY || MP-TOUTIAO\r\n\t\t\t\t\t\tdpr = this.isPC ? devicePixelRatio : 1\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef MP-ALIPAY || MP-LARK\r\n\t\t\t\t\t\tdpr = devicePixelRatio\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t// #ifdef WEB\r\n\t\t\t\t\t\tdpr = 1\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\tthis.rect = res\r\n\t\t\t\t\t\tthis.nodeWidth = width * dpr;\r\n\t\t\t\t\t\tthis.nodeHeight = height * dpr;\r\n\t\t\t\t\t\tconst ctx = uni.createCanvasContext(this.canvasId, this);\r\n\t\t\t\t\t\tcanvas =  new Canvas(ctx, this, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn { canvas, width, height, devicePixelRatio: dpr, node };\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn {}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t// #ifndef APP-NVUE\r\n\t\tgetRelative(e, touches) {\r\n\t\t\tlet { clientX, clientY } = e\r\n\t\t\tif(!(clientX && clientY) && touches && touches[0]) {\r\n\t\t\t\tclientX = touches[0].clientX\r\n\t\t\t\tclientY = touches[0].clientY\r\n\t\t\t}\r\n\t\t\treturn {x: clientX - this.rect.left, y: clientY - this.rect.top, wheelDelta: e.wheelDelta || 0}\r\n\t\t},\r\n\t\tgetTouch(e, touches) {\r\n\t\t\tconst {x} = touches && touches[0] || {}\r\n\t\t\tconst touch = x ? touches[0] : this.getRelative(e, touches);\r\n\t\t\tif(this.landscape) {\r\n\t\t\t\t[touch.x, touch.y] = [touch.y, this.height - touch.x]\r\n\t\t\t}\r\n\t\t\treturn touch;\r\n\t\t},\r\n\t\ttouchStart(e) {\r\n\t\t\tthis.isDown = true\r\n\t\t\tconst next = () => {\r\n\t\t\t\tconst touches = convertTouchesToArray(e.touches)\r\n\t\t\t\tif(this.chart) {\r\n\t\t\t\t\tconst touch = this.getTouch(e, touches)\r\n\t\t\t\t\tthis.startX = touch.x\r\n\t\t\t\t\tthis.startY = touch.y\r\n\t\t\t\t\tthis.startT = new Date()\r\n\t\t\t\t\tconst handler = this.chart.getZr().handler;\r\n\t\t\t\t\tdispatch.call(handler, 'mousedown', touch)\r\n\t\t\t\t\tdispatch.call(handler, 'mousemove', touch)\r\n\t\t\t\t\thandler.processGesture(wrapTouch(e), 'start');\r\n\t\t\t\t\tclearTimeout(this.endTimer);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(this.isPC) {\r\n\t\t\t\tgetRect(`#${this.canvasId}`, {context: this}).then(res => {\r\n\t\t\t\t\tthis.rect = res\r\n\t\t\t\t\tnext()\r\n\t\t\t\t})\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tnext()\r\n\t\t},\r\n\t\ttouchMove(e) {\r\n\t\t\tif(this.isPC && this.enableHover && !this.isDown) {this.isDown = true}\r\n\t\t\tconst touches = convertTouchesToArray(e.touches)\r\n\t\t\tif (this.chart && this.isDown) {\r\n\t\t\t\tconst handler = this.chart.getZr().handler;\r\n\t\t\t\tdispatch.call(handler, 'mousemove', this.getTouch(e, touches))\r\n\t\t\t\thandler.processGesture(wrapTouch(e), 'change');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\ttouchEnd(e) {\r\n\t\t\tthis.isDown = false\r\n\t\t\tif (this.chart) {\r\n\t\t\t\tconst touches = convertTouchesToArray(e.changedTouches)\r\n\t\t\t\tconst {x} = touches && touches[0] || {}\r\n\t\t\t\tconst touch = (x ? touches[0] : this.getRelative(e, touches)) || {};\r\n\t\t\t\tif(this.landscape) {\r\n\t\t\t\t\t[touch.x, touch.y] = [touch.y,  this.height - touch.x]\r\n\t\t\t\t}\r\n\t\t\t\tconst handler = this.chart.getZr().handler;\r\n\t\t\t\tconst isClick = Math.abs(touch.x - this.startX) < 10 && new Date() - this.startT < 200;\r\n\t\t\t\tdispatch.call(handler, 'mouseup', touch)\r\n\t\t\t\thandler.processGesture(wrapTouch(e), 'end');\r\n\t\t\t\tif(isClick) {\r\n\t\t\t\t\tdispatch.call(handler, 'click', touch)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.endTimer = setTimeout(() => {\r\n\t\t\t\t\t\tdispatch.call(handler, 'mousemove', {x: 999999999,y: 999999999});\r\n\t\t\t\t\t\tdispatch.call(handler, 'mouseup', {x: 999999999,y: 999999999});\r\n\t\t\t\t\t},50)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifdef H5\r\n\t\tmousewheel(e){\r\n\t\t\tif(this.chart) {\r\n\t\t\t\t// dispatch.call(this.chart.getZr().handler, 'mousewheel', this.getTouch(e))\r\n\t\t\t}\r\n\t\t}\r\n\t\t// #endif\r\n\t}\r\n};\r\n</script>\r\n<style>\t\r\n.lime-echart {\r\n\tposition: relative;\r\n\t/* #ifndef APP-NVUE */\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t/* #endif */\r\n\t/* #ifdef APP-NVUE */\r\n\tflex: 1;\r\n\t/* #endif */\r\n}\r\n.lime-echart__canvas {\r\n\t/* #ifndef APP-NVUE */\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\t/* #endif */\r\n\t/* #ifdef APP-NVUE */\r\n\tflex: 1;\r\n\t/* #endif */\r\n}\r\n/* #ifndef APP-NVUE */\r\n.lime-echart__mask {\r\n\tposition: absolute;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\tz-index: 1;\r\n}\r\n/* #endif */\r\n</style>\r\n","import Component from 'E:/uniapp工作空间/Science _fiction/uni_modules/lime-echart/components/l-echart/l-echart.vue'\nwx.createComponent(Component)"],"names":["_sfc_main","platform","getDeviceInfo","canIUseCanvas2d","callback","uni","size","res","width","height","args","use2dCanvas","canvasId","resolve","reject","copyArgs","echarts","theme","opts","item","sleep","config","setCanvasCreator","e","getRect","dpr","devicePixelRatio","node","canvas","ctx","Canvas","touches","clientX","clientY","x","touch","next","convertTouchesToArray","handler","dispatch","wrapTouch","isClick","Component"],"mappings":"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"}