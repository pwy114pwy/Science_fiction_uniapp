"use strict";const e=require("../../common/vendor.js"),a=require("../../api.js"),r={__name:"index",setup(r){let n=e.ref(""),o=e.ref([]),t=e.ref([]),u=e.ref([]),i=e.ref([]),l=e.ref([]);e.ref([{name:"太空探险"},{name:"人工智能"},{name:"异世界"}]);let c=a=>{e.index.setStorageSync("NowBook",a),e.index.navigateTo({url:`/pages/detail/detail?id=${JSON.stringify(a.Book_ID)}`})};let s=()=>{n.value&&e.index.navigateTo({url:"/pages/search/search?keyword="+encodeURIComponent(n.value)})},f=a=>{e.index.navigateTo({url:"/pages/search/search?tag="+a})};return e.onMounted((()=>{!async function(){try{const r=await e.index.request({url:a.Get_Swiper,method:"GET"});o.value=r.data}catch(r){console.error("Error fetching images:",r)}}(),async function(){try{const r=await e.index.request({url:a.Get_All_Books,method:"GET"});t.value=r.data,u.value=t.value.filter((e=>e.Tag.includes("classic"))),i.value=t.value.filter((e=>e.Tag.includes("hot"))),l.value=[...new Set(t.value.map((e=>e.Topic)).join(" ").split(" "))]}catch(r){console.error("Error fetching books:",r)}}()})),(a,r)=>({a:e.unref(n),b:e.o((a=>e.isRef(n)?n.value=a.detail.value:n=a.detail.value)),c:e.o(((...a)=>e.unref(s)&&e.unref(s)(...a))),d:e.f(e.unref(o),((a,r,n)=>({a:a.Img_Url,b:e.o((r=>e.unref(c)(a)),r),c:r}))),e:e.f(e.unref(l).slice(0,4),((a,r,n)=>({a:e.t(a),b:r,c:e.o((r=>e.unref(f)(a)),r)}))),f:e.f(e.unref(u),((a,r,n)=>({a:a.Img_Url,b:e.t(a.Book_Name),c:r,d:e.o((r=>e.unref(c)(a)),r)}))),g:e.f(e.unref(i),((a,r,n)=>({a:a.Img_Url,b:e.t(a.Book_Name),c:r,d:e.o((r=>e.unref(c)(a)),r)})))})}},n=e._export_sfc(r,[["__scopeId","data-v-618c021d"]]);wx.createPage(n);
