"use strict";const e=require("../../common/vendor.js"),t=require("../../api.js"),a={__name:"login",setup(a){let r=e.ref(""),o=e.ref("");const n=async()=>{try{const a=await e.index.request({url:t.User_Login,method:"POST",data:{username:r.value,password:o.value}});console.log(a),200==a.statusCode?(e.index.showToast({title:"登录成功"}),e.index.setStorageSync("token",a.data.token),e.index.setStorageSync("userInfo",JSON.stringify(a.data.user)),e.index.reLaunch({url:"/pages/index/index"})):e.index.showToast({title:"登录失败,"+a.data.error,icon:"error",duration:2e3})}catch(a){e.index.showToast({title:"网络请求失败",icon:"error",duration:2e3})}},s=()=>{e.index.navigateTo({url:"/pages/register/register"})};return(t,a)=>({a:e.unref(r),b:e.o((t=>e.isRef(r)?r.value=t.detail.value:r=t.detail.value)),c:e.unref(o),d:e.o((t=>e.isRef(o)?o.value=t.detail.value:o=t.detail.value)),e:e.o(n),f:e.o(s)})}},r=e._export_sfc(a,[["__scopeId","data-v-ed4b0756"]]);wx.createPage(r);
