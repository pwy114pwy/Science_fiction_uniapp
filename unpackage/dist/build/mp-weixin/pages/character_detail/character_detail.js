"use strict";const e=require("../../common/vendor.js"),a=require("../../api.js");if(!Array){e.resolveComponent("l-echart")()}Math;const t={__name:"character_detail",setup(t){const l=e.ref(null),r=e.ref(null),n=e.ref(!1),i=e.ref(null),u=e.ref(null),o=e.ref([]);let s=e.ref([]),c=e.ref([]),d=e.ref([]);e.onLoad((async t=>{const v=t.id;u.value=await async function(t){return(await e.index.request({url:a.Get_Character_Detail,method:"POST",data:{Character_ID:t}})).data}(v),o.value=[],o.value=await async function(t){return(await e.index.request({url:a.Get_Related_Characters,method:"POST",data:{Character_ID:t}})).data}(v),console.log(o.value),u.value[0].Tag&&(s.value=u.value[0].Tag.split(","));for(const e in u.value[0])if(e.includes("Contribute")&&u.value[0][e]){let a=u.value[0][e].split("|"),t={value:a[0],name:a[1],des:a[2]};c.value.push(t)}if(u.value[0].Classic_Quotes){let e=u.value[0].Classic_Quotes.split("|");d.value=e}let f={title:{text:""},radar:{indicator:[{name:"战斗力",max:100},{name:"智力",max:100},{name:"决策",max:100},{name:"影响力",max:100},{name:"道德",max:100},{name:"意志",max:100}]},series:[{name:"能力",type:"radar",data:[{value:[80,99,95,99,99,99],name:"罗辑"}]}]},m={tooltip:{trigger:"item"},legend:{top:"0%",left:"center"},series:[{name:"主要贡献",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:20,fontWeight:"bold"}},labelLine:{show:!1},data:[]}]};f.series[0].data=[u.value[0].Ability],m.series[0].data=c.value,setTimeout((async()=>{if(!l.value)return;const a=await l.value.init(e.echarts),t=await r.value.init(e.echarts);t.on("click",(function(e){console.log(e),i.value=e,n.value=!0})),a.setOption(f),t.setOption(m)}),300)}));return e.onMounted((()=>{})),(a,t)=>e.e({a:u.value},u.value?e.e({b:u.value[0].Role_Image,c:e.t(u.value[0].Role_Name),d:e.sr(l,"e0cccf2b-0",{k:"chartRef"}),e:e.t(u.value[0].Role_Introduction),f:e.f(e.unref(s),((a,t,l)=>({a:e.t(a||"暂无描述")}))),g:e.sr(r,"e0cccf2b-1",{k:"chartRef_1"}),h:n.value},n.value?{i:e.t(i.value.name),j:e.t(i.value.data.des),k:e.o((e=>n.value=!1))}:{},{l:e.f(e.unref(d),((a,t,l)=>({a:e.t(a),b:t}))),m:o.value.length},o.value.length?{n:e.f(o.value,((a,t,l)=>({a:a.realtion_Image,b:e.t(a.realtion_Name),c:e.t(a.relation_Type||"暂无描述"),d:a.id,e:e.o((t=>{return l=a,void e.index.navigateTo({url:`/pages/character_detail/character_detail?id=${l.realtion_ID}`});var l}),a.id)})))}:{}):{})}},l=e._export_sfc(t,[["__scopeId","data-v-e0cccf2b"]]);wx.createPage(l);
