"use strict";const e=require("../../common/vendor.js"),t=require("../../api.js");if(!Array){e.resolveComponent("l-echart")()}Math;const a={__name:"Illustrated_detail",setup(a){const r=e.ref(null);let n=e.index.getStorageSync("NowBook");return e.onMounted((async()=>{try{const a=await e.index.request({url:t.Get_CharactersAndRelationships,method:"POST",data:{Illustrated_ID:e.index.getStorageSync("NowIllustrated").Book_ID}}),n={title:{text:"人物关系网"},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"none",symbolSize:40,label:{show:!0},edgeLabel:{fontSize:15},data:[],links:[],lineStyle:{opacity:.9,width:2,curveness:0}}]},{characters:o,relationships:i}=a.data;n.series[0].data=o.map((e=>({c_id:e.id,name:e.name,x:e.x,y:e.y}))),n.series[0].links=i.map((e=>({source:e.from,target:e.to,label:{show:!0,formatter:e.label},lineStyle:{curveness:.2}}))),setTimeout((async()=>{if(!r.value)return;const t=await r.value.init(e.echarts);t.setOption(n),t.on("click",(async function(t){if("graph"===t.seriesType&&"node"===t.dataType){const a=t.data.c_id;e.index.navigateTo({url:`/pages/character_detail/character_detail?id=${a}`})}}))}),300)}catch(a){console.error("Error fetching data:",a)}})),e.onLoad((e=>{JSON.parse(e.id)})),(t,a)=>({a:e.t(e.unref(n).Book_Name),b:e.sr(r,"51385412-0",{k:"chartRef"})})}},r=e._export_sfc(a,[["__scopeId","data-v-51385412"]]);a.__runtimeHooks=2,wx.createPage(r);
